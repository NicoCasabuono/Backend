{{!< layout/main}}

<div>
  <h1>Carrito</h1>
  {{#each cart.products}}
    <div>
      <h2>{{this.title}}</h2>
      <p>Cantidad: {{this.quantity}}</p>
      <p>Precio unitario: {{this.price}}</p>
      <p>Precio total: {{this.quantity * this.price}}</p>
      <form action="/api/carts/{{../cart._id}}/products/{{this._id}}" method="PUT">
        <label for="quantity">Nueva cantidad:</label>
        <input type="number" name="quantity" value="{{this.quantity}}" min="1">
        <button type="submit">Actualizar cantidad</button>
      </form>
      <form action="/api/carts/{{../cart._id}}/products/{{this._id}}" method="DELETE">
        <button type="submit">Eliminar del carrito</button>
      </form>
    </div>
  {{/each}}
  <p>Total a pagar: {{cart.totalPrice}}</p>
  <form action="/api/carts/{{cart._id}}" method="DELETE">
    <button type="submit">Vaciar carrito</button>
  </form>
</div>
